import{d as b,u as T,f as p,s as q,_ as C,c as a,a as s,w as g,v as f,t as c,F,p as $,o as i,g as E,l as A,h as w}from"./index-2fN0mo1y.js";const R=b({setup(){const n=T(),t=p(""),d=p(18),u=p(60),h=p([]),k=18,m=100,e=async()=>{if(t.value!=="")try{const r=await(await fetch(`http://localhost:8000/api/users/?search=${t.value}&l_age=${d.value}&u_age=${u.value}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}})).json();h.value=r.result.users||[]}catch(o){console.error("Error searching users:",o)}},l=async o=>{try{await fetch(`http://localhost:8000/api/friend_request/send/${o}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}}),alert("Friend request sent!"),e()}catch(r){console.error("Error sending friend request:",r)}},v=async o=>{try{await fetch(`http://localhost:8000/api/sent_request/remove/${o}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}}),alert("Friend request canceled!"),e()}catch(r){console.error("Error canceling friend request:",r)}},y=async o=>{try{await fetch(`http://localhost:8000/api/friend_request/accept/${o}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}}),alert("Friend request accepted!"),e()}catch(r){console.error("Error accepting friend request:",r)}},_=async o=>{try{await fetch(`http://localhost:8000/api/friend/remove/${o}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}}),alert("Friend removed!"),e()}catch(r){console.error("Error removing friend:",r)}};return q([t,d,u],e,{immediate:!0}),{searchTerm:t,l_age:d,u_age:u,users:h,minAge:k,maxAge:m,searchUsers:e,sendFriendRequest:l,cancelFriendRequest:v,acceptFriendRequest:y,removeFriend:_}}}),U={class:"container mt-5"},S={class:"search-bar"},j={class:"age-slider"},z=["min","max"],P=["min","max"],V={class:"user-list"},D={class:"user-info"},I=["src"],B=["onClick"],L=["onClick"],N=["onClick"],O=["onClick"];function G(n,t,d,u,h,k){const m=w("router-link");return i(),a("div",U,[t[6]||(t[6]=s("h1",null,"Search Page",-1)),s("div",S,[g(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.searchUsers&&n.searchUsers(...e)),placeholder:"Search for a user",class:"form-control mb-3"},null,544),[[f,n.searchTerm]]),s("div",j,[s("label",null,"Age Range: "+c(n.l_age)+" - "+c(n.u_age),1),g(s("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=e=>n.l_age=e),min:n.minAge,max:n.u_age,onInput:t[3]||(t[3]=(...e)=>n.searchUsers&&n.searchUsers(...e))},null,40,z),[[f,n.l_age]]),g(s("input",{type:"range","onUpdate:modelValue":t[4]||(t[4]=e=>n.u_age=e),min:n.l_age,max:n.maxAge,onInput:t[5]||(t[5]=(...e)=>n.searchUsers&&n.searchUsers(...e))},null,40,P),[[f,n.u_age]])])]),s("ul",V,[(i(!0),a(F,null,$(n.users,e=>(i(),a("li",{key:e.id,class:"user-item"},[s("div",D,[E(m,{to:"/profile/"+e.id,class:"profile-link"},{default:A(()=>[s("img",{src:e.profile_image,alt:"Profile",class:"profile-image"},null,8,I),s("span",null,c(e.first_name)+" "+c(e.last_name),1)]),_:2},1032,["to"]),s("p",null,"Common hobbies: "+c(e.common_hobby_count),1)]),s("div",null,[e.isFriend?(i(),a("button",{key:0,class:"btn btn-danger",onClick:l=>n.removeFriend(e.id)}," Remove Friend ",8,B)):e.hasSentRequest?(i(),a("button",{key:1,class:"btn btn-warning",onClick:l=>n.cancelFriendRequest(e.id)}," Cancel Request ",8,L)):e.hasPendingRequest?(i(),a("button",{key:2,class:"btn btn-success",onClick:l=>n.acceptFriendRequest(e.id)}," Accept ",8,N)):(i(),a("button",{key:3,class:"btn btn-primary",onClick:l=>n.sendFriendRequest(e.id)}," Add Friend ",8,O))])]))),128))])])}const H=C(R,[["render",G],["__scopeId","data-v-4d058275"]]);export{H as default};
