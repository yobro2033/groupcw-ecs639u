import{d as u,u as p,r as m,_ as g,c as a,a as r,t as f,b,w as i,v as l,e as w,o as d}from"./index-2fN0mo1y.js";const c=u({data(){return{username:"",password:"",token:"",loginError:!1,loginErrorMessage:""}},methods:{async login(){this.loginError=!1,this.loginErrorMessage="";const e={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})},s=await fetch("http://127.0.0.1:8000/api/login/",e);if(!s.ok){this.loginError=!0,this.loginErrorMessage="Login failed. Please try again.";return}var o=await s.json();const n=p();n.login(o.result.user,o.result.access_token),console.log(n.username),this.token=o.result.access_token,m.push("/dashboard"),alert("Login successful!")}}}),h={class:"container mt-5"},y={key:0,class:"alert alert-danger"},E={class:"form-group mb-3"},v={class:"form-group mb-4"};function k(e,s,o,n,S,M){return d(),a("div",h,[r("form",{onSubmit:s[2]||(s[2]=w(t=>e.login(),["prevent"])),class:"border p-4 bg-light"},[s[5]||(s[5]=r("h2",{class:"mb-4 text-center"},"Log In!",-1)),e.loginError?(d(),a("div",y,f(e.loginErrorMessage),1)):b("",!0),r("div",E,[s[3]||(s[3]=r("label",{for:"usernameInput",class:"form-label"},"Email",-1)),i(r("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>e.username=t),class:"form-control",id:"usernameInput",placeholder:"Enter email",required:""},null,512),[[l,e.username]])]),r("div",v,[s[4]||(s[4]=r("label",{for:"passwordInput",class:"form-label"},"Password",-1)),i(r("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>e.password=t),class:"form-control",id:"passwordInput",placeholder:"Password",required:""},null,512),[[l,e.password]])]),s[6]||(s[6]=r("button",{type:"submit",class:"btn btn-primary w-100"},"Submit",-1))],32)])}const $=g(c,[["render",k]]);export{$ as default};
