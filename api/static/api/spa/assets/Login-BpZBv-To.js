import{d as b,r as i,u as v,a as w,_ as y,c as u,b as o,t as c,e as m,w as f,v as g,f as k,o as d}from"./index-BumwQ-_g.js";function S(){const e=document.cookie.split(";");for(const s of e){const[r,l]=s.split("=");if(r.trim()==="csrftoken")return l}return null}const M=b({setup(){const e=i({email:"",password:""}),s=i(null),r=i(null);return{form:e,errorMessage:s,successMessage:r,login:async()=>{s.value=null,r.value=null;const p={username:e.value.email,password:e.value.password};try{const n=S(),a=await(await fetch("/api/login/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n||""},body:JSON.stringify(p)})).json();a.success==="true"?(v().login(a.result.user,a.result.access_token),w.push("/dashboard"),r.value="Login successful!"):s.value=a.error}catch(n){console.error("Error during login:",n),s.value="An error occurred during login. Please try again."}}}}}),C={class:"container mt-5"},I={key:0,class:"alert alert-danger"},T={key:1,class:"alert alert-success"},h={class:"form-group mb-3"},B={class:"form-group mb-4"};function E(e,s,r,l,p,n){return d(),u("div",C,[o("form",{onSubmit:s[2]||(s[2]=k((...t)=>e.login&&e.login(...t),["prevent"])),class:"border p-4 bg-light"},[s[5]||(s[5]=o("h2",{class:"mb-4 text-center"},"Log In",-1)),e.errorMessage?(d(),u("div",I,c(e.errorMessage),1)):m("",!0),e.successMessage?(d(),u("div",T,c(e.successMessage),1)):m("",!0),o("div",h,[s[3]||(s[3]=o("label",{for:"usernameInput",class:"form-label"},"Email",-1)),f(o("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>e.form.email=t),class:"form-control",id:"usernameInput",placeholder:"Enter email",required:""},null,512),[[g,e.form.email]])]),o("div",B,[s[4]||(s[4]=o("label",{for:"passwordInput",class:"form-label"},"Password",-1)),f(o("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>e.form.password=t),class:"form-control",id:"passwordInput",placeholder:"Password",required:""},null,512),[[g,e.form.password]])]),s[6]||(s[6]=o("button",{type:"submit",class:"btn btn-primary w-100"},"Submit",-1))],32)])}const $=y(M,[["render",E],["__scopeId","data-v-6fae4cc9"]]);export{$ as default};
