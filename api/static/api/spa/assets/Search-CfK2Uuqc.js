import{d as C,u as b,f as p,s as q,_ as F,c as a,a as o,w as f,v as g,t as c,F as $,p as A,o as i,h as E,l as R,i as S}from"./index-Ct5SDsbx.js";function y(){const e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}const w=C({setup(){const e=b(),t=p(""),d=p(18),u=p(60),m=p([]),k=18,h=100,n=async()=>{if(t.value!=="")try{const s=await(await fetch(`/api/users/?search=${t.value}&l_age=${d.value}&u_age=${u.value}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token}})).json();m.value=s.result.users||[]}catch(r){console.error("Error searching users:",r)}},l=async r=>{try{const s=y();await fetch(`/api/friend_request/send/${r}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token,"X-CSRFToken":s||""}}),alert("Friend request sent!"),n()}catch(s){console.error("Error sending friend request:",s)}},v=async r=>{try{await fetch(`/api/sent_request/remove/${r}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token}}),alert("Friend request canceled!"),n()}catch(s){console.error("Error canceling friend request:",s)}},T=async r=>{try{const s=y();await fetch(`/api/friend_request/accept/${r}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token,"X-CSRFToken":s||""}}),alert("Friend request accepted!"),n()}catch(s){console.error("Error accepting friend request:",s)}},_=async r=>{try{await fetch(`/api/friend/remove/${r}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token}}),alert("Friend removed!"),n()}catch(s){console.error("Error removing friend:",s)}};return q([t,d,u],n,{immediate:!0}),{searchTerm:t,l_age:d,u_age:u,users:m,minAge:k,maxAge:h,searchUsers:n,sendFriendRequest:l,cancelFriendRequest:v,acceptFriendRequest:T,removeFriend:_}}}),U={class:"container mt-5"},j={class:"search-bar"},z={class:"age-slider"},P=["min","max"],V=["min","max"],D={class:"user-list"},I={class:"user-info"},B=["src"],L=["onClick"],N=["onClick"],O=["onClick"],X=["onClick"];function G(e,t,d,u,m,k){const h=S("router-link");return i(),a("div",U,[t[6]||(t[6]=o("h1",null,"Search Page",-1)),o("div",j,[f(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>e.searchTerm=n),onInput:t[1]||(t[1]=(...n)=>e.searchUsers&&e.searchUsers(...n)),placeholder:"Search for a user",class:"form-control mb-3"},null,544),[[g,e.searchTerm]]),o("div",z,[o("label",null,"Age Range: "+c(e.l_age)+" - "+c(e.u_age),1),f(o("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=n=>e.l_age=n),min:e.minAge,max:e.u_age,onInput:t[3]||(t[3]=(...n)=>e.searchUsers&&e.searchUsers(...n))},null,40,P),[[g,e.l_age]]),f(o("input",{type:"range","onUpdate:modelValue":t[4]||(t[4]=n=>e.u_age=n),min:e.l_age,max:e.maxAge,onInput:t[5]||(t[5]=(...n)=>e.searchUsers&&e.searchUsers(...n))},null,40,V),[[g,e.u_age]])])]),o("ul",D,[(i(!0),a($,null,A(e.users,n=>(i(),a("li",{key:n.id,class:"user-item"},[o("div",I,[E(h,{to:"/profile/"+n.id,class:"profile-link"},{default:R(()=>[o("img",{src:n.profile_image,alt:"Profile",class:"profile-image"},null,8,B),o("span",null,c(n.first_name)+" "+c(n.last_name),1)]),_:2},1032,["to"]),o("p",null,"Common hobbies: "+c(n.common_hobby_count),1)]),o("div",null,[n.isFriend?(i(),a("button",{key:0,class:"btn btn-danger",onClick:l=>e.removeFriend(n.id)}," Remove Friend ",8,L)):n.hasSentRequest?(i(),a("button",{key:1,class:"btn btn-warning",onClick:l=>e.cancelFriendRequest(n.id)}," Cancel Request ",8,N)):n.hasPendingRequest?(i(),a("button",{key:2,class:"btn btn-success",onClick:l=>e.acceptFriendRequest(n.id)}," Accept ",8,O)):(i(),a("button",{key:3,class:"btn btn-primary",onClick:l=>e.sendFriendRequest(n.id)}," Add Friend ",8,X))])]))),128))])])}const H=F(w,[["render",G],["__scopeId","data-v-108ae9c2"]]);export{H as default};
