import{d as _,u as b,f as p,s as F,_ as q,c as a,a as t,w as f,v as k,t as u,F as $,p as E,o as i,h as R,l as A,i as w}from"./index-DW8eHUYe.js";function v(){const n=document.cookie.split(";");for(const o of n){const[l,c]=o.split("=");if(l.trim()==="csrftoken")return c}return null}const S=_({setup(){const n=b(),o=p(""),l=p(18),c=p(60),m=p([]),g=18,h=100,e=async()=>{if(o.value!=="")try{const s=await(await fetch(`/api/users/?search=${o.value}&l_age=${l.value}&u_age=${c.value}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}})).json();m.value=s.result.users||[]}catch(r){console.error("Error searching users:",r)}},d=async r=>{try{const s=v();await fetch(`/api/friend_request/send/${r}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token,"X-CSRFToken":s||""}}),alert("Friend request sent!"),e()}catch(s){console.error("Error sending friend request:",s)}},y=async r=>{try{await fetch(`/api/sent_request/remove/${r}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}}),alert("Friend request canceled!"),e()}catch(s){console.error("Error canceling friend request:",s)}},T=async r=>{try{const s=v();await fetch(`/api/friend_request/accept/${r}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token,"X-CSRFToken":s||""}}),alert("Friend request accepted!"),e()}catch(s){console.error("Error accepting friend request:",s)}},C=async r=>{try{await fetch(`/api/friend/remove/${r}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token "+n.token}}),alert("Friend removed!"),e()}catch(s){console.error("Error removing friend:",s)}};return F([o,l,c],e,{immediate:!0}),{searchTerm:o,l_age:l,u_age:c,users:m,minAge:g,maxAge:h,searchUsers:e,sendFriendRequest:d,cancelFriendRequest:y,acceptFriendRequest:T,removeFriend:C}}}),U={class:"container mt-5"},j={class:"search-bar"},z={class:"age-slider"},P=["min","max"],V=["min","max"],D={class:"user-list"},I={class:"user-info"},B=["src"],L=["onClick"],N=["onClick"],O=["onClick"],X=["onClick"];function G(n,o,l,c,m,g){const h=w("router-link");return i(),a("div",U,[o[6]||(o[6]=t("h1",null,"Search Page",-1)),t("div",j,[f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.searchTerm=e),onInput:o[1]||(o[1]=(...e)=>n.searchUsers&&n.searchUsers(...e)),placeholder:"Search for a user",class:"form-control mb-3"},null,544),[[k,n.searchTerm]]),t("div",z,[t("label",null,"Age Range: "+u(n.l_age)+" - "+u(n.u_age),1),f(t("input",{type:"range","onUpdate:modelValue":o[2]||(o[2]=e=>n.l_age=e),min:n.minAge,max:n.u_age,onInput:o[3]||(o[3]=(...e)=>n.searchUsers&&n.searchUsers(...e))},null,40,P),[[k,n.l_age]]),f(t("input",{type:"range","onUpdate:modelValue":o[4]||(o[4]=e=>n.u_age=e),min:n.l_age,max:n.maxAge,onInput:o[5]||(o[5]=(...e)=>n.searchUsers&&n.searchUsers(...e))},null,40,V),[[k,n.u_age]])])]),t("ul",D,[(i(!0),a($,null,E(n.users,e=>(i(),a("li",{key:e.id,class:"user-item"},[t("div",I,[R(h,{to:"/profile/"+e.id,class:"profile-link"},{default:A(()=>[t("img",{src:e.profile_image,alt:"Profile",class:"profile-image"},null,8,B),t("span",null,u(e.first_name)+" "+u(e.last_name),1)]),_:2},1032,["to"]),t("p",null,"Common hobbies: "+u(e.common_hobby_count),1)]),t("div",null,[e.isFriend?(i(),a("button",{key:0,class:"btn btn-danger",onClick:d=>n.removeFriend(e.id)}," Remove Friend ",8,L)):e.hasSentRequest?(i(),a("button",{key:1,class:"btn btn-warning",onClick:d=>n.cancelFriendRequest(e.id)}," Cancel Request ",8,N)):e.hasPendingRequest?(i(),a("button",{key:2,class:"btn btn-success",onClick:d=>n.acceptFriendRequest(e.id)}," Accept ",8,O)):(i(),a("button",{key:3,class:"btn btn-primary",onClick:d=>n.sendFriendRequest(e.id)}," Add Friend ",8,X))])]))),128))])])}const H=q(S,[["render",G],["__scopeId","data-v-9f0474e9"]]);export{H as default};
