import{s as c}from"./vue-multiselect.min-CNWz8Zf2.js";import{d as y,f as n,g,_ as h,c as u,a as o,w as a,v as l,h as E,b as v,e as I,i as V,o as f}from"./index-BXswga3D.js";const N=y({components:{Multiselect:c},setup(){const e=n({first_name:"",last_name:"",email:"",date_of_birth:"",password:"",confirm_password:""}),s=n([]),m=n([]),i=n(!1),d=n(!1),b=async()=>{try{const t=await(await fetch("http://127.0.0.1:8000/api/hobbies/")).json();m.value=t.result}catch(r){console.error("Failed to fetch hobbies:",r)}};return g(()=>{console.log("Fetching hobbies..."),b()}),{form:e,selectedHobbies:s,hobbyOptions:m,passwordError:i,userExistsError:d,submit:async()=>{if(i.value=!1,d.value=!1,e.value.password!==e.value.confirm_password){i.value=!0;return}const r={first_name:e.value.first_name,last_name:e.value.last_name,email:e.value.email,date_of_birth:e.value.date_of_birth,password:e.value.password,password1:e.value.password,password2:e.value.confirm_password,hobbies:s.value.map(t=>({id:t.id,name:t.name}))};try{const p=await(await fetch("http://127.0.0.1:8000/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();p.success?alert("Signup successful"):p.error==="User already exists"?d.value=!0:alert("Signup failed: "+p.error)}catch(t){console.error("Error during signup:",t)}}}}}),U={class:"mb-3"},q={class:"mb-3"},S={class:"mb-3"},C={class:"mb-3"},P={class:"mb-3"},k={class:"mb-3"},B={class:"mb-3"},H={key:0,class:"alert alert-danger"},M={key:1,class:"alert alert-danger"};function O(e,s,m,i,d,b){const w=V("multiselect");return f(),u("form",{onSubmit:s[7]||(s[7]=I((...r)=>e.submit&&e.submit(...r),["prevent"])),class:"border p-4 bg-light"},[o("div",U,[s[8]||(s[8]=o("label",{for:"firstNameInput",class:"form-label"},"First Name",-1)),a(o("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>e.form.first_name=r),class:"form-control",id:"firstNameInput",placeholder:"Enter first name",required:""},null,512),[[l,e.form.first_name]])]),o("div",q,[s[9]||(s[9]=o("label",{for:"lastNameInput",class:"form-label"},"Last Name",-1)),a(o("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=r=>e.form.last_name=r),class:"form-control",id:"lastNameInput",placeholder:"Enter last name",required:""},null,512),[[l,e.form.last_name]])]),o("div",S,[s[10]||(s[10]=o("label",{for:"emailInput",class:"form-label"},"Email",-1)),a(o("input",{type:"email","onUpdate:modelValue":s[2]||(s[2]=r=>e.form.email=r),class:"form-control",id:"emailInput",placeholder:"Enter email",required:""},null,512),[[l,e.form.email]])]),o("div",C,[s[11]||(s[11]=o("label",{for:"dobInput",class:"form-label"},"Date of Birth",-1)),a(o("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=r=>e.form.date_of_birth=r),class:"form-control",id:"dobInput",placeholder:"Enter date of birth",required:""},null,512),[[l,e.form.date_of_birth]])]),o("div",P,[s[12]||(s[12]=o("label",{for:"hobbiesInput",class:"form-label"},"Hobbies",-1)),E(w,{modelValue:e.selectedHobbies,"onUpdate:modelValue":s[4]||(s[4]=r=>e.selectedHobbies=r),options:e.hobbyOptions,label:"name","track-by":"id",multiple:""},null,8,["modelValue","options"])]),o("div",k,[s[13]||(s[13]=o("label",{for:"passwordInput",class:"form-label"},"Password",-1)),a(o("input",{type:"password","onUpdate:modelValue":s[5]||(s[5]=r=>e.form.password=r),class:"form-control",id:"passwordInput",placeholder:"Password",required:""},null,512),[[l,e.form.password]])]),o("div",B,[s[14]||(s[14]=o("label",{for:"passwordInput2",class:"form-label"},"Confirm Password",-1)),a(o("input",{type:"password","onUpdate:modelValue":s[6]||(s[6]=r=>e.form.confirm_password=r),class:"form-control",id:"passwordInput2",placeholder:"Confirm Password",required:""},null,512),[[l,e.form.confirm_password]])]),e.passwordError?(f(),u("div",H," Passwords do not match. ")):v("",!0),e.userExistsError?(f(),u("div",M," User already exists. ")):v("",!0),s[15]||(s[15]=o("button",{type:"submit",class:"btn btn-primary"},"Sign Up",-1))],32)}const F=h(N,[["render",O]]);export{F as default};
