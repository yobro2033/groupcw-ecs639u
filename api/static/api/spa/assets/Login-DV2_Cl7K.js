import{d as p,u as m,r as g,_ as f,c as i,a as o,t as c,b,w as l,v as u,e as w,o as d}from"./index-Ct5SDsbx.js";function k(){const s=document.querySelector('meta[name="csrf-token"]');return s?s.getAttribute("content"):null}const y=p({data(){return{username:"",password:"",token:"",loginError:!1,loginErrorMessage:""}},methods:{async login(){this.loginError=!1,this.loginErrorMessage="";const e={method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":k()||""},body:JSON.stringify({username:this.username,password:this.password})},n=await fetch("/api/login/",e);if(!n.ok){this.loginError=!0,this.loginErrorMessage="Login failed. Please try again.";return}var r=await n.json();const a=m();a.login(r.result.user,r.result.access_token),console.log(a.username),this.token=r.result.access_token,g.push("/dashboard"),alert("Login successful!")}}}),E={class:"container mt-5"},h={key:0,class:"alert alert-danger"},v={class:"form-group mb-3"},S={class:"form-group mb-4"};function M(s,e,n,r,a,T){return d(),i("div",E,[o("form",{onSubmit:e[2]||(e[2]=w(t=>s.login(),["prevent"])),class:"border p-4 bg-light"},[e[5]||(e[5]=o("h2",{class:"mb-4 text-center"},"Log In!",-1)),s.loginError?(d(),i("div",h,c(s.loginErrorMessage),1)):b("",!0),o("div",v,[e[3]||(e[3]=o("label",{for:"usernameInput",class:"form-label"},"Email",-1)),l(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.username=t),class:"form-control",id:"usernameInput",placeholder:"Enter email",required:""},null,512),[[u,s.username]])]),o("div",S,[e[4]||(e[4]=o("label",{for:"passwordInput",class:"form-label"},"Password",-1)),l(o("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t),class:"form-control",id:"passwordInput",placeholder:"Password",required:""},null,512),[[u,s.password]])]),e[6]||(e[6]=o("button",{type:"submit",class:"btn btn-primary w-100"},"Submit",-1))],32)])}const I=f(y,[["render",M]]);export{I as default};
